0：登录
1：注册
2：
# 功能需求

## 客户端

- 新用户注册
  - 自定义用户名密码，用户名不允许重复
  - 【允许定义初始目录结构】
- 登录
  - 用户名、密码验证
  - 传输不考虑加密（后端加密），长度强度有要求，服务器里存储加密后密码
- 查看
  - 目录结构
- 文件
  - 上传
    - 单个文件（包括0字节文件）
    - 文件夹（多级子文件夹）
    - 数据库中相同文件只存一份，“秒传”不真正上传文件（文件名、创建、修改、访问时间均可以不同）
    - 同文件多用户同时上传内容不重复，分别传输不同的部分，支持用户逐渐加入和减少
    - 支持单用户多用户的“断点续传”
  - 下载
    - 单文件下载（包括0字节文件）
    - 文件夹下载，按照用户在网盘中的存储结构依次下载
    - “断点续下”
    - “秒下”，下载某文件并放于硬盘某目录后，如果文件名、位置、内容不做任何修改，再次下载直接提示已下载完毕
  - 改名
    - 单文件改名，注意重名
  - 复制
    - 文件和文件夹（-r包括0字节文件）的复制
    - 可以是同目录也可以是不同目录（不包含递归，不能复制到其下层的文件夹中）
  - 移动
    - 文件和文件夹（-r包括0字节文件）移动（不包含递归，不能移动到其下层某文件夹中）
  - 删除
    - 文件和文件夹（-r包括0字节文件）
    - 无回收站
  - B、C刷新实时同步文件信息

## WEB端

- 文件
  - 上传
    - 单文件上传（包括0字节文件），可以选择存放目录
    - “秒传”
  - 下载
    - 单文件下载（包括0字节文件），可以选择存放目录
  - 改名
    - 单文件改名，注意重名
  - 复制
    - 单文件复制（0字节文件、可以选择相同或不同目录）
  - 移动
    - 单文件移动（0字节文件）
  - 删除
    - 单文件删除（0字节文件）
- 其余相同



# 技术调研

## 技术框架

- 前端：electron，两个client都可以用，叶神说“网页改改就能用。electron是用web技术写桌面的。本质上就是内置一个chromium”
- 后端：要求的C++
  - 连接数据库
  - http请求
  - 文件上传下载
- 数据库：要求的MariaDB



## 部分技术思路

#### 数据库存储文件

- 文件使用md5码、文件类型、文件大小共同作为主码，避免md5冲突，同时也能判断文件唯一性，添加属性记录文件引用数
- 建立用户对应的目录树型结构存储，用户名为用户数据库中根目录名，采用path enumeration，参考：
  - [树状结构数据的数据库表设计及使用 - 2. 路径枚举（Path Enumeration）模型 - 墨天轮 (modb.pro)](https://www.modb.pro/db/378604)
  - [【MySQL疑难杂症】如何将树形结构存储在数据库中(方案二Path Enumeration）_慕课手记 (imooc.com)](https://www.imooc.com/article/22132)
- 目录中树形结构存储表中，文件与文件夹一视同仁，添加属性判断是否为文件，并建立外码指向文件表



### 秒传

- 查文件表，确定是否已经存在该文件，如果存在，则在用户目录表中添加对应文件记录，并关联到文件，更新文件引用数
- 



### 文件上传

- 首先client发上传申请，server获取到上传申请后，一片一片地向提出相同文件上传申请的用户请求文件片（每个用户一轮），这样可以同时兼顾人数的增加和减少，并且也能够做到“断点”（记录下文件的传输offset）
- 